<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Mes services - Love Market</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="/style.css" />
  </head>
  <body>
    <header class="topbar">
      <div class="logo">ğŸ’• Love Market</div>
      <% if (user) { %>
      <nav class="nav">
        <a href="/dashboard" title="Dashboard" class="<%= currentPath === '/dashboard' ? 'nav-active' : '' %>">ğŸ <span class="nav-text"> Accueil</span></a>
        <a href="/shop" title="Boutique" class="<%= currentPath === '/shop' ? 'nav-active' : '' %>">ğŸ›ï¸<span class="nav-text"> Boutique</span></a>
        <a href="/my-services" title="Mes services" class="<%= currentPath === '/my-services' ? 'nav-active' : '' %>">ğŸ¤<span class="nav-text"> Mes services</span></a>
        <a href="/negotiations" title="NÃ©gociations" class="nav-link-with-badge <%= currentPath === '/negotiations' ? 'nav-active' : '' %>">
          ğŸ’¬<span class="nav-text"> NÃ©gociations</span>
          <% if (notificationCount > 0) { %>
          <span class="notification-badge"><%= notificationCount %></span>
          <% } %>
        </a>
        <% if (user.role === 'admin') { %>
        <a href="/admin" class="admin-link <%= currentPath === '/admin' ? 'nav-active' : '' %>" title="Admin">âš™ï¸<span class="nav-text"> Admin</span></a>
        <% } %>
      </nav>
      <div class="user-info">
        <span class="credits"><%= user.credits %> â¤ï¸</span>
        <span class="user-name"><%= user.displayName %></span>
        <a href="/logout" class="logout">DÃ©connexion</a>
      </div>
      <% } %>
    </header>

    <main class="page">
      <section class="section">
        <h1 class="section-title">Mes services ğŸŒ¸</h1>

        <div class="card">
          <h2 class="card-title">CrÃ©er un nouveau service</h2>
          <form method="post" action="/services" class="form">
            <label>
              Titre
              <input type="text" name="title" placeholder="Petit dÃ©jeuner au lit" required />
            </label>
            <label>
              Description
              <textarea name="description" rows="2" placeholder="DÃ©cris ton service"></textarea>
            </label>
            <label>
              CatÃ©gorie
              <select name="category">
                <option value="Romantique">Romantique</option>
                <option value="DÃ©tente">DÃ©tente</option>
                <option value="Fun">Fun</option>
                <option value="Maison">Maison</option>
                <option value="Sortie">Sortie</option>
                <option value="Famille">Famille</option>
                <option value="Enfants">Enfants</option>
                <option value="Cuisine">Cuisine</option>
                <option value="Voyage">Voyage</option>
                <option value="Bien-Ãªtre">Bien-Ãªtre</option>
              </select>
            </label>
            <label>
              IcÃ´ne
              <select name="icon">
                <option value="ğŸ›">ğŸ› Salle de bain / mÃ©nage</option>
                <option value="ğŸ¥">ğŸ¥ Petit dÃ©jeuner / cuisine</option>
                <option value="ğŸ½ï¸">ğŸ½ï¸ Restaurant / sortie</option>
                <option value="ğŸ’†">ğŸ’† Massage / dÃ©tente</option>
                <option value="ğŸ²">ğŸ² SoirÃ©e fun / jeux</option>
                <option value="ğŸ“º">ğŸ“º SÃ©ries / film</option>
                <option value="ğŸ‘¶">ğŸ‘¶ Garde enfants</option>
                <option value="ğŸŒ¹">ğŸŒ¹ Geste romantique</option>
                <option value="ğŸ‰">ğŸ‰ FÃªte / anniversaire</option>
                <option value="ğŸš—">ğŸš— Sortie / balade</option>
                <option value="ğŸ’—">ğŸ’— Autre</option>
              </select>
            </label>
            <label>
              Prix (en crÃ©dits â¤ï¸)
              <input type="number" name="price" min="0" step="1" value="20" />
            </label>
            <button type="submit" class="btn-primary">CrÃ©er le service</button>
          </form>
        </div>

        <div class="cards">
          <% if (!services.length) { %>
          <p>Tu ne proposes encore rien. CrÃ©e ton premier service !</p>
          <% } %>
          <% services.forEach(function(service) { %>
          <div class="card">
            <h2 class="card-title">
              <span class="service-icon"><%= service.icon || 'ğŸ’—' %></span>
              <%= service.title %>
            </h2>
            <p class="category"><%= service.category %></p>
            <% if (service.description) { %>
            <p><%= service.description %></p>
            <% } %>
            <p class="price"><%= service.price %> â¤ï¸</p>
            <form method="get" action="/services/<%= service.id %>/edit" class="inline-form">
              <button type="submit" class="btn-secondary">Modifier</button>
            </form>
            <form method="post" action="/services/<%= service.id %>/delete" class="inline-form">
              <button type="submit" class="btn-secondary">Supprimer</button>
            </form>
          </div>
          <% }) %>
        </div>
      </section>
    </main>
  </body>
</html>
